# 生徒たちが持っている数字 numbers が与えられるので、ペアになる生徒たちの数字を返す findPairs という関数を定義する問題
ある学校では文化祭のときに、生徒全員に数字をランダムに配っている。そして同じ数字同士を持つペアが現れたら、テーマパークのペアチケットをプレゼントしている。

## 条件
・配列は昇順で返すこと<br>
・同じ数字を持つ生徒が 3 人以上いたら適応外にすること<br>


## 関数の入出力例
入力のデータ型： `integer[] numbers`<br>
出力のデータ型： `integer[]`<br>


## テストケース
`findPairs([10,12,13,14,15,16,16,7,7,8]) --> [7,16]`<br>
`findPairs([1,1]) --> [1]`<br>
`findPairs([1,2]) --> []`<br>
`findPairs([1,2,3,4,5,6,6,7,7,8]) --> [6,7]`<br>
`findPairs([1,3,6,3,1,4,6,4]) --> [1,3,4,6]`<br>
`findPairs([3,3,-1,-1,1,6,6,4,4]) --> [-1,3,4,6]`<br>
`findPairs([30,30,30,30,1,600,600,40,40,40]) --> [600]`<br>


## 思考プロセス
ゴール: 同じ数字同士を持つペアを求める<br>
→ 「ペアになる = 登場回数が2回」と言い換えることができる<br>
必要な要素: ①ハッシュマップの作成 ②ハッシュマップの値が「2」の要素を配列に格納<br>

①ハッシュマップの作成<br>
各要素の登場回数をカウントするハッシュマップを作成する<br>

②ハッシュマップの値が「2」の要素を配列に格納<br>
「ペア」になるのは2の倍数のとき<br>
ただし、最後のテストケースから4のような2より大きい偶数の場合、ペアに該当しないと判断できる<br>
→ ハッシュマップの値が「2」の要素を配列に追加していく<br>


## 考えられるエッジケース
・いずれかの文字列が空<br>


## 悩んだ箇所
・特になかった<br>


## 計算量
JS<br>                                                                        
(予想)時間計算量：O(n)　空間計算量：O(n)<br>
・時間計算量：ループ処理が2回あるが、定数は無視されるため<br>
・空間計算量：ハッシュマップ作成に伴う追加のメモリ消費があるため<br>
※ sort() は in-place アルゴリズムのため、追加のメモリ消費はない<br>
(結果)時間計算量：O(n log n)　空間計算量：O(n)<br>
JavaScript の sort() メソッドの時間計算量は、一般的に O(n log n) になるため 

## 直面したエラーと解決策
・`findPairs([3,3,-1,-1,1,6,6,4,4])`の -1 が最後に配置されている<br>
(原因)昇順にしていなかった<br>
(前)
```
...
return res;
```
(後)
```
return res.sort();
```

・res.sort()で返した結果、最初のテストケースの結果が`['16','7']`となった<br>
(原因)sort()は UTF-16 コード単位の値の並びになるため<br>
JavaScript の配列 sort() メソッドは、デフォルトでは要素を文字列として比較し、Unicode コードポイント順にソートする。<br>
参照: https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/sort<br>
(前)
```
...
return res.sort();
```
(後)比較関数を使用する
```
...
return res.sort((a,b) => a - b);
```

## 気づき
・sort()の使い方を調べながら理解して使用した<br>
・Object.keys()で取得したキーは文字列型になること。そのため、このメソッドを使う場合は型に気をつける必要がある。<br>
・JavaScriptでは const を使用できるときは常に const を使うのがベストプラクティス とされていること<br>
→ この問題においては、Object.values()の結果を格納する変数は値を変更しない変数であるため let ではなく const で宣言できた<br>

## 改善点・フィードバック
(JS)<br>
・Object.keys()で取得したキーは const で宣言した変数に格納すること<br>
・Object.keys()で取得したキーは文字列型になるため、配列格納時にNumberでキャストすること<br>
