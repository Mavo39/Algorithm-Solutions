# 問題

**自然数の配列と、配列の各要素に特定の処理を実行するコールバック関数 f を引数として受け取る customArray 関数を作成する問題**  
この関数は、引数で与えられたコールバック関数 f を使用して配列の各要素に処理を施し、その結果を新しい配列の要素として順に出力する  

### 入力

（Function）関数の参照  
（array）自然数の配列  

### 出力

（void）配列の各要素にコールバック関数 f を適用した結果を順にコンソールに出力  

### コールバック関数

1. int cube(int n)  
整数 n を受け取って、3 乗にして返す関数  

2. int splitAndAdd(int n)  
整数 n を受け取って、全ての桁数を合計して返す関数  


## この問題に取り組む目的

- クロージャを使って、関数を再利用する方法を身につけること  

## テストケース

```
customArray(cube, [3, 11, 24, 31])
--> 27
--> 1331
--> 13824
--> 29791

customArray(splitAndAdd, [3, 11, 24, 31])
--> 3
--> 2
--> 6
--> 4
```
  

## 仮説・検証

### 仮説

- 関数の引数が「コールバック関数」「配列」であることから、コールバック関数を入れ替えても構造が変わらないよう、customArray() を実装する  
- テストケースが各行で1つずつ出力されていることから、結果を出力したら改行する構造にする  

#### 実装方針
  
- コールバック関数の定義
    - クロージャまたはアロー関数を使って、型明示を行なう  
    - $splitAndAdd では、自然数の配列が入力される前提だが、安全のため abs() で絶対値を取り、剰余演算 (% 10) と 除算 (/ 10) を使って各桁の合計を計算する  

- customArray 関数の定義
    - クロージャを変数 $customArray に代入して定義する
    - 配列 $arr の要素を最初から最後まで処理するために for ループを使用する
    - ループ内で、コールバック関数 $f を現在の要素 $arr[$i] に対して実行し、その結果を echo で出力した後、PHP_EOL を付けて改行する

#### この実装方針にした理由

- 問題の目的である「クロージャを使って、関数を再利用する方法を身につけること」に応えるため

- 配列のインデックスと要素を確実に処理し、各要素に処理を施すという操作を明確に示すため、foreach ではなく、シンプルな for ループ を採用

### 検証

実装方針に基づいた実装により、問題なく実装できた

## ふりかえり

- 無名関数を使うか、通常の関数の実装を行なうか、選択できるようになった  
- 今回のケースでは、関数をデータとして扱い、動的に関数を入れ替えても使用できるようにしたかったため、無名関数を使用した  

## 直面したエラーと解決策

直面したエラーはなかった

#### 学び

- 無名関数はグローバル環境を汚さず、必要な場所で必要なロジックをデータとして定義することで、別の関数にそのロジックを渡すために使用されることを知った  

## フィードバック・改善点


