# 配列とウィンドウサイズ k が与えられたとき、各ウィンドウ内の最大値を求める関数を実装する問題
ただし、両端キューを用いてインデックスを管理し、最大値を高速に取得すること


## 関数の入出力例
入力のデータ型： `integer[] arr, integer k`  
出力のデータ型： `integer[]`  


## テストケース
1. `getMaxWindows([1,3,-1,-3,5,3,6,7], 3) --> [3,3,5,5,6,7]`  
2. `getMaxWindows([5,5,5,5,5], 2) --> [5,5,5,5]`  
3. `getMaxWindows([1,2,3,4,5,6], 3) --> [3,4,5,6]`  
4. `getMaxWindows([6,5,4,3,2,1], 2) --> [6,5,4,3,2]`  
5. `getMaxWindows([4,2], 3) --> []`  
6. `getMaxWindows([-1,-3,5,3,6,7], 3) --> [5,5,6,7]`  
7. `getMaxWindows([4,2,12,3,8], 1) --> [4,2,12,3,8]`  


## 【思考プロセス】
#### ◾️ゴール  
getMaxWindow 関数を実装し、テストケースを正しく出力すること  

#### ◾️仮説  
**【関数の目的】**  
Dequeを使ってスライディングウィンドウを実装し、各ウィンドウ内の最大値を求めること  

**【必要な要素】**  
- 両端キューを使用するため、Nodeクラス・標準メソッドを備えたDequeクラスが必要  
※ [code](../../../Deque/src/js/Deque)に実装し、再利用しています  

- getMaxWindow 関数の実装  
1. 結果を格納するための空配列の用意
2. 配列が空のケースの対応
3. 配列がウィンドウサイズに達していないケースの対応
- `2.`および`3.`のケースは、空の配列を返す
4. Dequeクラスのインスタンスを生成し、メソッドを使う  
・Dequeでは配列のインデックスを管理する
・ループ処理により、要素をスライドしながら、ウィンドウ範囲外と対象外を選別する
・ループ処理は2回必要
(1)Dequeの初期化: 配列の先頭からウィンドウサイズまでの要素  
- 先頭に最大値に該当するインデックスを格納する
- → デックの末尾と配列の対象の値を比較し、比較対象の値が大きい場合に、デックの末尾をデキューする
(2)要素をずらしていく: ウィンドウサイズから配列の末尾までの要素  
- ウィンドウの範囲外かどうかのチェック
- 配列の値とデックの値の比較
- → (1)と同じ処理を行なう
- 結果を格納する配列に値を格納する


#### ◾️検証  
- 仮説において、結果配列にインデックスを格納するタイミングについて、見積もりができていなかった
- (1)Dequeの初期化後 (2)2回目のループの最初 (3)2回目のループ後 において、結果配列に要素を格納することで期待通りの出力を得ることができた

## 【悩んだ箇所】
1. 結果が全て`False`になったこと
- 配列は参照を格納する構造ということを思い出したことで解決できた
- 参照の比較から文字列の比較に修正することで、`True`の結果を得ることができた 


## 【直面したエラーと解決策】  
**エラー①**  
【内容】出力結果が全て`False`になる  
【原因】参照の比較をしていたこと
【解決プロセス】Recursionプログラムの「配列」の単元で、配列はオブジェクトであるという記述を発見し、配列同士は参照の比較になってしまうことを思い出した  
【解決策】`JSON.stringfy()`によって、内容の比較に変更

**エラー②**
【内容】出力結果が1つ足りない  
【原因】結果配列への格納タイミング  
【解決プロセス】  
1. `console.log()`でログ出力
2. 値が1つ足りないことに気づく
3. `6.`のテストケースから先頭がうまく対応していないと気づく
4. 1つ目のループが完了した後に結果配列に格納していなかった
5. 加えて、2つ目のループの最後の要素をやりっぱなしにしていた
【解決策】2つ目のループの最初と、そのループ後に、結果配列に格納する  

## 【気づき】
- こういうときにコンソール出力が役立つと感じた
- 内容の比較ができていないことに気づいたのはファインプレーだった
- ただし、その実装方法については、ググり方に問題があり、ChatGPTで解決した

## 【フィードバック・改善点】
- Dequeクラスに`isEmpty()`メソッドを作って、nullチェックするのも選択肢としてあり