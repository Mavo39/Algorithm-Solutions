# R 商事の毎日の予想株価リスト stocks が与えられたとき、各日にちの株価がより高くなるまで何日待つかを示したリストを返す、dailyStockPrice という関数を作成する問題
株価がより高くなる日がない場合は 0 を入力すること  
    

## 関数の入出力例
入力のデータ型： `integer[] stocks`  
出力のデータ型： `integer[]`  


## テストケース
1. `dailyStockPrice([58,59,71]) --> [1,1,0]`  
2. `dailyStockPrice([58,59,37,83]) --> [1,2,1,0]`  
3. `dailyStockPrice([63,63,64]) --> [2,1,0]`  
4. `dailyStockPrice([85,83,67,83,81,38,88,85]) --> [6,5,1,3,2,1,0,0]`  
5. `dailyStockPrice([38,37,38,35,34,37,39,40,33,33]) --> [6,1,4,2,1,1,1,0,0,0]`  


## 【思考プロセス】
#### ◾️ゴール  
何日待てばその日の株価より高くなるかを示したリストを返す関数を実装し、テストケースを正しく出力すること  

#### ◾️仮説   
【目的】  
対象としている株価（配列の要素）が、何日後に上がるかをリスト化すること  
  
【実装の方向性】  
- 株価リストを後ろから走査し、各日のインデックスをスタックに積む  
※ 後ろから走査することで、将来の株価を先に処理し、必要な情報をスタックに保持できる  
- スタックには「自分より後に出てくる、より高い株価の日のインデックス」のみを残す  
- スタックの先頭と現在のインデックスとの差から「何日後に株価が上がるか」を計算する  
- 結果は新しい配列に格納する  

【必要な要素】  
- スタック：将来の高い株価のインデックスを一時的に保持する  
- 結果配列：日数を記録して最終的に返す  
- 現在の株価：ループ中の各日で参照  
- スタックトップの株価：現在と比較して高いかどうかを判断するために使う  

#### ◾️検証  
- 仮説通りに実装し、期待通りの出力を得ることができた  
※ ただし、リファクタリングの余地があったため、その点を以下の【フィードバック・改善点】にまとめています。  

## 【悩んだ箇所】
「スタックを使って配列の後ろから処理する」という実装のヒントの意図がわからなかったこと  
- なぜ後ろから処理する必要があるのか？  
- しかし、スタックは後入れ先出し（LIFO）の構造であり、新しい要素（＝将来の情報）がスタックの上部（配列の末尾）に積まれる特性がある  
- 今回の問題は「将来、今より株価が上がる日を見つける」ことが目的なので、先に将来の株価情報を処理し、それをスタックに保持することで、現在の株価と比較できる状態を作れると気づく  
- つまり、配列を後ろから処理して「未来の情報を先にスタックに積んでおく」ことが、スタックの特性と問題の目的に合致している  
- さらに、「何日後か」を表す方法として、配列のインデックスを活用することを紙に具体例を書く中で思いついた  

## 【直面したエラーと解決策】
エラーには遭遇しなかった   

## 【気づき】
- コードレビューによって、不要な処理に気づけたこと   
→ 空配列のチェックは、for 文の条件式により必要がないとわかった  
- unshift によるパフォーマンス  
→ 当初、unshift をつかって配列の先頭に要素を追加していたが、追加するたびにすでにある要素を後方にずらす処理が発生する  
- スコープが違っていても、同じ名前の変数を使うのは避けるのが望ましいこと  
→ 読み手の混乱を事前に防ぐため  

## 【フィードバック・改善点】
- if文による空配列チェックは不要  
- unshift はパフォーマンスの観点から避けるべき  
- スコープが違っていても同一名の変数は避けるべき  
※ 変更箇所が多かったため、リファクタリングしたコードを[code](./js/dailyStockPrice.js)に記述  