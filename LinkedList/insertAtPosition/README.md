# 連結リストの先頭 head、位置 position、データ data が与えられるので、特定の位置の後にデータを挿入した連結リストを返す、insertAtPosition という関数を作成する問題


## 【Node クラス】
#### プロパティ
`int data: 要素の値`   
`Node next: 1つ先のノード`  
next はデフォルトでは null を設定  

## 【SinglyLinkedList クラス】
#### プロパティ
`Node head: 先頭のノード`  
※固定配列を受け取り、コンストラクタ関数内で それぞれの Node の前後をつなげること  

## 【関数の入出力例】
`入力のデータ型： Node<integer> head, integer position, integer data`  
`出力のデータ型： Node<integer>`  


## 【テストケース】
1. `insertAtPosition(singlyLinkedList([2,4]),0,5) --> 2➡5➡4`  
2. `insertAtPosition(singlyLinkedList([2,4]),1,5) --> 2➡4➡5`  
3. `insertAtPosition(singlyLinkedList([2,10,34,45,67,356]),2,5) --> 2➡10➡34➡5➡45➡67➡356`  
4. `insertAtPosition(singlyLinkedList([2,10,34,45,67,356]),2,3) --> 2➡10➡34➡3➡45➡67➡356`  
5. `insertAtPosition(singlyLinkedList([2,10,34,45,67,356]),5,3) --> 2➡10➡34➡45➡67➡356➡3`  
6. `insertAtPosition(singlyLinkedList([20,-5,34,45,67,356]),34,50) --> 20➡-5➡34➡45➡67➡356`  
7. `insertAtPosition(singlyLinkedList([20,-5,34,45,67,356,34,687,31,-34,5]),20,54) --> 20➡-5➡34➡45➡67➡356➡34➡687➡31➡-34➡5`  
8. `insertAtPosition(singlyLinkedList([20,-5,34,45,67,356,34,687,31,-34,5]),4,54) --> 20➡-5➡34➡45➡67➡54➡356➡34➡687➡31➡-34➡5`  
  

## 【考えられるエッジケース】
- head が null のケース  


## 【思考プロセス】
#### ◾️ゴール  
連結リストの中の最小値のインデックスを、テストケースごとに正しく出力すること  

#### ◾️仮説（必要な要素）  
ゴールを達成するために必要な要素を整理  
  
1. Node クラスの定義  
- データを保持する変数  
- 次のノードを指し示すポインタを格納する変数  
  
2. SinglyLinkedList クラスの定義  
- 配列を引数としたコンストラクタを用意する  
- 先頭ノードを head 変数で管理する  
  
※ ①・②については、事前に[Common](../Common/php)に定義し、再活用しております  
  
3. 連結リストの中で data と同じ値を持つインデックスを返す関数を実装  
- インデックスを変数で管理する  
- ループ処理でノードとインデックスを末尾まで更新していく  
- インデックスが position と同じ位置になったときに以下の処理をする  
- ① dataを引数として新しいノードを作成する  
- ② 現在のノードの next を別の変数に格納する  
- ③ 現在のノードの next に新しいノードを格納する  
- ④ 新しいノードの next に②の変数を格納する  

#### ◾️検証  
- 仮説に基づき実装し、期待通りの出力が得られた  

## 【悩んだ箇所】
- テスト関数をどう実装するか、その組み立て方  
- テストで何を実現したいのかをまず決めた  
- 目的：期待される出力と実際のデータを使った結果としての出力が一致することを確認する  
- 文字列として扱い、両者が一致するかを確かめた  
- この目的を決めるプロセスでどう実装していくかの方針が見えた  

## 【直面したエラーと解決策】
#### エラー①
`PHP Fatal error:  Uncaught Error: Class "Common\SinglyLinkedList" not found in ~/LinkedList/insertAtPosition/php/test.php:10`

**原因**  
必要なファイルの読み込みをしていなかったこと  

**気づいたきっかけ**  
`Uncaught` ということは認識されなかった可能性があると推測  

**解決法**  
`require_once` で必要なファイルを読み込んだ  

## 【気づき】
- これまで目視でテストケースの出力結果を確認していたが、見落としてしまう可能性があると気づいた  
- そこで、関数を使って合っているか否かを判定できれば確実性が増すと思い、テスト用の関数を作成してみた  
- 過去にRecursionで使った関数を探し、見様見真似で作ったところ、うまくいった  
- これにより、一目でうまくいったかそうでないかが判別できるようになった  

## 【フィードバック・改善点】
- 「position が連結リストに存在しないとき」の処理を考えていなかった  
```php
    // 改善前
    ...
    return $head;

    // 改善後
    if ($index !== $position) {
        return $head;
    }

    return $head;
```
